<!-- app/views/posts/edit.html.erb -->
<div class="container py-4">
<div class="form-narrow">
  <h1 class="h5 mb-3"><span style="color: #FF9E80;"><%= @nui.name %></span> の投稿を編集</h1>

  <%= form_with model: [@nui, @post], local: true do |f| %>
    <div class="mb-3">
      <%= f.label :post, "本文", class: "form-label" %>
      <%= f.text_area :post, rows: 5, class: "form-control" %>
    </div>

    <div class="mb-3">
      <%= f.label :image, "画像", class: "form-label" %>
      <%= f.file_field :image, class: "form-control" %>
      <% if @post.image&.attached? %>
        <div class="mt-2">
          <%= image_tag @post.image.variant(resize_to_limit: [600, 600]).processed,
                        class: "img-fluid rounded" %>
        </div>
      <% end %>
    </div>

    <div class="d-flex gap-2">
      <%= f.submit "公開する", class: "btn btn-primary" %>
      <%= f.submit "下書き保存", class: "btn btn-outline-secondary" %>
      <%= link_to "戻る", @post.draft? ? drafts_nui_posts_path(@nui) : [@nui, @post],
                  class: "btn btn-outline-primary ms-auto" %>
    </div>
  <% end %>
</div>
</div>
