<div class="container py-4">
  <div class="d-flex align-items-center gap-3 mb-4">
    <%= user_avatar(@user, size: 96) %>
    <div>
      <h1 class="h4 m-0 d-flex align-items-center gap-2">
        <span><%= user_name(@user) %></span>

        <% if user_signed_in? %>
          <% if current_user == @user %>
            <%= link_to "プロフィール編集",
                        edit_user_registration_path,
                        class: "btn btn-sm btn-outline-secondary" %>
          <% else %>
            <%= button_to "DMする",
                          conversations_path(user_id: @user.id),
                          method: :post,
                          class: "btn btn-sm btn-outline-primary" %>
          <% end %>
        <% end %>
      </h1>
    </div>
  </div>

  <h2 class="h5 mb-3">フォロー中のぬい</h2>
  <% if @followed_nuis.any? %>
    <div class="row g-3 mb-4">
      <% @followed_nuis.each do |nui| %>
        <div class="col-12 col-sm-6 col-lg-4">
          <div class="card p-3 d-flex flex-row align-items-center gap-3">
            <%= link_to nui_path(nui) do %>
              <%= nui_avatar_tag(nui, size: 56) %>
            <% end %>
            <div>
              <div class="fw-semibold"><%= link_to nui.name, nui_path(nui) %></div>
              <div class="text-muted small">フォロワー <%= nui.followers.count %></div>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <p class="text-muted">まだフォロー中のぬいはありません。</p>
  <% end %>

  <h2 class="h5 mb-3">管理しているぬい</h2>
  <% if @managed_nuis.any? %>
    <div class="row g-3">
      <% @managed_nuis.each do |nui| %>
        <div class="col-12 col-sm-6 col-lg-4">
          <div class="card p-3 d-flex flex-row align-items-center gap-3">
            <%= link_to nui_path(nui) do %>
              <%= nui_avatar_tag(nui, size: 56) %>
            <% end %>
            <div>
              <div class="fw-semibold"><%= link_to nui.name, nui_path(nui) %></div>
              <div class="text-muted small"><%= truncate(nui.profile.to_s, length: 60) %></div>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <p class="text-muted">まだ管理しているぬいはありません。</p>
  <% end %>
</div>
